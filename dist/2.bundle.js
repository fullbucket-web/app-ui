(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{190:function(t,e,n){e.TrixEditor=n(191).TrixEditor},191:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),a=function(t){function e(e){var n=t.call(this,e)||this;return n.container=null,n.editor=null,n.d=null,n.id=n.generateId(),n.state={showMergeTags:!1,tags:[]},n}return r(e,t),e.prototype.generateId=function(){var t=Date.now(),e=0;return t<=e?t=++e:e=t,"T"+t.toString()},e.prototype.componentDidMount=function(){var t=this,e=this.props;this.container=document.getElementById("editor-"+this.id),this.container?(this.container.addEventListener("trix-initialize",function(){t.editor=t.container.editor,t.editor||console.error("cannot  find trix editor"),e.onEditorReady&&"function"==typeof e.onEditorReady&&e.onEditorReady(t.editor)},!1),this.container.addEventListener("trix-change",this.handleChange.bind(this),!1),e.uploadURL&&this.container.addEventListener("trix-attachment-add",this.handleUpload.bind(this))):console.error("editor not found")},e.prototype.componentWillUnmount=function(){this.container.removeEventListener("trix-initialize",this.handleChange),this.container.removeEventListener("trix-change",this.handleChange),this.props.uploadURL&&this.container.removeEventListener("trix-attachment-add",this.handleUpload)},e.prototype.handleChange=function(t){var e=this.props,n=this.state,o=t.target.innerText;e.onChange&&e.onChange(t.target.innerHTML,o);var r=this.editor.getSelectedRange();if(o&&r[0]==r[1]&&e.mergeTags){var i=r[0]-1;if(i>=0&&i<o.length)for(var a=o[i],s=0;s<e.mergeTags.length;s++)if(a==e.mergeTags[s].trigger){n.showMergeTags=!0,n.tags=e.mergeTags[s].tags,this.setState(n);break}}},e.prototype.handleUpload=function(t){var e=t.attachment;if(e.file)return this.uploadAttachment(e)},e.prototype.uploadAttachment=function(t){var e,n,o;if(e=t.file,n=new FormData,this.props.uploadData)for(var r in this.props.uploadData)n[r]=this.props.uploadData[r];return n.append("Content-Type",e.type),n.append("file",e),(o=new XMLHttpRequest).open("POST",this.props.uploadURL,!0),o.upload.onprogress=function(e){var n=e.loaded/e.total*100;return t.setUploadProgress(n)},o.onload=function(){var e,n;if(o.status>=200&&o.status<300)return n=e=o.responseText,t.setAttributes({url:n,href:e})},o.send(n)},e.prototype.handleTagSelected=function(t,e){e.preventDefault();var n=this.state;n.showMergeTags=!1,this.setState(n),this.editor.expandSelectionInDirection("backward"),this.editor.insertString(t.tag)},e.prototype.renderTagSelector=function(t){var e=this;if(!t)return null;var n=document.getElementById("trix-editor-top-level").getBoundingClientRect(),o=this.editor.getClientRectAtPosition(this.editor.getSelectedRange()[0]),r={position:"absolute",top:o.top+25-n.top,left:o.left+25-n.left,width:"250px",boxSizing:"border-box",padding:0,margin:".2em 0 0",backgroundColor:"hsla(0,0%,100%,.9)",borderRadius:".3em",background:"linear-gradient(to bottom right, white, hsla(0,0%,100%,.8))",border:"1px solid rgba(0,0,0,.3)",boxShadow:".05em .2em .6em rgba(0,0,0,.2)",textShadow:"none"},a={display:"block",padding:".2em .5em",cursor:"pointer"};return i.createElement("div",{style:r,className:"react-trix-suggestions"},t.map(function(t){return i.createElement("a",{key:t.name,style:a,href:"#",onClick:e.handleTagSelected.bind(e,t)},t.name)}))},e.prototype.render=function(){var t=this,e=this.state,n=this.props,o={id:"editor-"+this.id,input:"input-"+this.id};n.autoFocus&&(o.autoFocus=n.autoFocus.toString()),n.placeholder&&(o.placeholder=n.placeholder);var r=null;return e.showMergeTags&&(r=this.renderTagSelector(e.tags)),i.createElement("div",{id:"trix-editor-top-level",ref:function(e){return t.d=e},style:{position:"relative"}},i.createElement("trix-editor",o),i.createElement("input",{type:"hidden",id:"input-"+this.id,value:this.props.value}),r)},e}(i.Component);e.TrixEditor=a},198:function(t,e,n){"use strict";n.r(e);var o=n(18),r=n(0),i=n.n(r),a=n(15),s=n.n(a),l=n(26),c=n.n(l),u=n(16),d=n.n(u),p=n(190),h=n(17),f=n.n(h),g=n(43);function m(t){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function y(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function b(t,e){return(b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function E(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var w=function(t){function e(t){var n,o,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o=this;var i=(n=!(r=v(e).call(this,t))||"object"!==m(r)&&"function"!=typeof r?E(o):r).props.html;return n.state={html:i,text:"",editing:!1},n.handleChange=n.handleChange.bind(E(E(n))),n}var n,o,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&b(t,e)}(e,i.a.Component),n=e,(o=[{key:"handleChange",value:function(t,e){clearTimeout(this.saveTimeout),this.setState({html:t,text:e,editing:!0}),window.console.log(JSON.stringify(t)),this.saveTimeout=setTimeout(function(){g.notify.show("Saved!","success",1500)},1e3)}},{key:"render",value:function(){var t=this.state.html;return i.a.createElement(f.a,null,i.a.createElement(p.TrixEditor,{onChange:this.handleChange,autoFocus:!0,value:t,placeholder:"Let the words flow...",mergeTags:[{trigger:"@",tags:[{name:"Dominic St-Pierre",tag:"@dominic"},{name:"John Doe",tag:"@john"}]}]}))}}])&&y(n.prototype,o),r&&y(n,r),e}(),T=n(9),x=function(t){var e=t.editorState;return i.a.createElement("div",null,i.a.createElement(c.a,{color:"primary",className:"back-button"},T.a),i.a.createElement(s.a,null,"Editing - ".concat(e.title)),i.a.createElement("div",{className:"editor-container"},i.a.createElement(w,{html:e.html})),i.a.createElement(d.a,null,i.a.createElement(d.a.Column,{offset:6,size:2},i.a.createElement(c.a,{size:"large",color:"danger",fullwidth:!0},T.b)),i.a.createElement(d.a.Column,{size:2},i.a.createElement(c.a,{size:"large",color:"info",fullwidth:!0},T.d)),i.a.createElement(d.a.Column,{size:2},i.a.createElement(c.a,{size:"large",color:"success",fullwidth:!0},T.c))))};e.default=Object(o.b)(function(t){return{editorState:t.editor.activeDocument}},null)(x)}}]);